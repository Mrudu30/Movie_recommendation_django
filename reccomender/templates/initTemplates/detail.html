{% extends 'base.html' %}
{% block content %}
{% if messages %}
    <ul class="messages">
        {% for message in messages %}
            <div class="alert alert-success">
                <strong>Success!</strong> {{message}}
            </div>
        {% endfor %}
    </ul>
{% endif %}

<div class="container">
    <table class="table table-borderless table-responsive">
        <tbody>
            <tr>
                <td width="50%">
                    <!-- Left Movie Info -->
                    <div class="thumbnail">
                        <img src="{{ movie.pic.url }}" class="img-responsive" >
                    </div>
                </td>
                <td width="50%" class="right-part">
                    <h1 class="movie-title">{{ movie.name }}</h1>
                    <p class="desc">{{ movie.desc }}</p>
                    <p class="date">Date of Release: <b>{{ movie.date_of_release }}</b></p>
                    <!-- Right Movie Info -->
                    <form class="form-horizontal" role="search" method="post" action="{% url 'detail' movie.id %}">
                        {% csrf_token %}
                        <div class="input-group checkbox">
                            {% if is_in_my_list %}
                                <h5 class="add-remove-title">Remove from my list:</h5>
                                <input type="checkbox" name="watch" id="watch" class="check">
                                <input type="submit" class="btn btn-light add" value="Remove">
                            {% else %}
                                <h5 class="add-remove-title">Add to my list:</h5>
                                <input type="checkbox" name="watch" id="watch" class="check">
                                <input type="submit" class="btn btn-light add" value="Add">
                            {% endif %}
                        </div>
                    </form>

                    <div class="commet-box">
                        <form method="post">
                            {% csrf_token %}
                            <textarea name="newcomment" id="comment" cols="30" rows="10" placeholder="Add Your Comments/Review"></textarea>
                            <input type="submit" value="Add Comment" class="btn btn-light add-comment">
                        </form>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<div class="sec-row">
    <table>
        <tbody>
            {% if comments %}
                {% for comment in comments %}
                    <tr class="text-white">
                        {% if request.user == comment.user %}
                            <td>
                                <button onclick="edit_comment('{{comment.id}}')">Edit</button>  
                                <button onclick="delete_comment('{{comment.id}}')">Delete</button>
                            </td>
                        {% endif %}
                        <td>{{ comment.user.username }}</td>
                        <td id="comment_{{comment.id}}">{{ comment.comment }}</td>
                    </tr>
                {% endfor %}
            {% else %}
                <tr class="text-white">
                    <td>Be The First To Give A Review</td>
                </tr>
            {% endif %}
        </tbody>
    </table>
    <div id="editCommentDiv" style="display: none;">
        <form method="post" id="editCommentForm">
            {% csrf_token %}
            <div class="form-group">
              <label for="editComment">Edit Comment:</label>
              <input type="text" name="editComment" id="editComment" class="form-control" placeholder="Edit Your Comment" aria-describedby="Comment_help">
              <small id="Comment_help" class=""></small>
            </div>
            <input type="submit" value="Edit" class="btn btn-primary">
        </form>
    </div>
</div>
{% endblock content %}
